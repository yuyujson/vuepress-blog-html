(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{600:function(s,e,n){"use strict";n.r(e);var a=n(29),r=Object(a.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("blockquote",[n("p",[s._v("前言: hexo部署在服务器后, 一旦断开ssh链接就会自动关闭. 故在网上找了个接管hexo进程的工具")])]),s._v(" "),n("h2",{attrs:{id:"安装pm2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装pm2"}},[s._v("#")]),s._v(" 安装pm2")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('npm  install -g pm2\n// 下方为打印出的日志信息\n/self/app/node-v12.13.1-linux-x64/bin/pm2 -> /self/app/node-v12.13.1-linux-x64/lib/node_modules/pm2/bin/pm2\n/self/app/node-v12.13.1-linux-x64/bin/pm2-dev -> /self/app/node-v12.13.1-linux-x64/lib/node_modules/pm2/bin/pm2-dev\n/self/app/node-v12.13.1-linux-x64/bin/pm2-docker -> /self/app/node-v12.13.1-linux-x64/lib/node_modules/pm2/bin/pm2-docker\n/self/app/node-v12.13.1-linux-x64/bin/pm2-runtime -> /self/app/node-v12.13.1-linux-x64/lib/node_modules/pm2/bin/pm2-runtime\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/pm2/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})\n\n+ pm2@4.2.0\nadded 206 packages from 202 contributors in 12.702s\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),s._v(" "),n("p",[s._v("完成后使用"),n("code",[s._v("pm2 -v")]),s._v("进行验证, 如果提示"),n("code",[s._v("pm2: 未找到命令")]),s._v("则进行下面操作")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ln -s /self/app/node-v12.13.1-linux-x64/bin/pm2 /usr/bin/pm2\n说明:\nln -s pm2安装路径(上方安装时打印的日志信息中有) /usr/bin/pm2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("完成后再次使用"),n("code",[s._v("pm2 -v")]),s._v("进行验证")]),s._v(" "),n("h2",{attrs:{id:"项目文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目文件"}},[s._v("#")]),s._v(" 项目文件")]),s._v(" "),n("p",[s._v("项目根目录增加文件"),n("code",[s._v("hexo_run.js")]),s._v(" 内容如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("//run\nconst { exec } = require('child_process')\nexec('hexo server',(error, stdout, stderr) => {\n    if(error){\n        console.log('exec error: ${error}')\n        return\n    }\n    console.log('stdout: ${stdout}');\n    console.log('stderr: ${stderr}');\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pm2 start hexo_run.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"停止"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#停止"}},[s._v("#")]),s._v(" 停止")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pm2 stop hexo_run.js\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("如果怕忘记命令可以创建一个"),n("code",[s._v("run.sh")]),s._v("文件吧这串命令放进去,增加权限. 下次直接执行这个文件就行")])])])}),[],!1,null,null,null);e.default=r.exports}}]);